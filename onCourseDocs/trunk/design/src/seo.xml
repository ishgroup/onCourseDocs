<?xml version="1.0" encoding="UTF-8" ?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="seo">
    <title>SEO and analysis</title>
    <section xml:id="seo-overview">
        <title>Overview</title>
        <para>onCourse is pre-configured with a whole range of SEO features to make your life easier
            and get good search ranking with minimal effort. Although we take care of many of the
            technical details, there is absolutely no substitute for writing good copy. That is, if
            you don't spend the time to write words which will get you ranking, then you are doomed
            from the outset. But if you write course descriptions and tag descriptions which are
            both engaging to potential students and use the correct search terms that people will
            search for, you are well on your way to a successful website.</para>
    </section>
    <section xml:id="seo-tagmanager">
        <title>Tag Manager</title>
        <para>Every site we build is created with Google Tag Manager integrated. This service drives
            the injection of javascript and tracking pixels or html into your site in really neat
            ways. In particular it allows:<itemizedlist>
                <listitem>
                    <para>Adding livechat systems to your site</para>
                </listitem>
                <listitem>
                    <para>Facebook, Google and other tracking code</para>
                </listitem>
                <listitem>
                    <para>A/B testing (show some elements to some people and not others)</para>
                </listitem>
                <listitem>
                    <para>Different content for different country regions</para>
                </listitem>
                <listitem>
                    <para>Inject advertising panels</para>
                </listitem>
                <listitem>
                    <para>Javascript is asynchronously loaded (so it doesn't slow the page
                        draw)</para>
                </listitem>
                <listitem>
                    <para>Versioned changes (so you can roll back easily)</para>
                </listitem>
                <listitem>
                    <para>Event tracking (such as add to shopping basket)</para>
                </listitem>
            </itemizedlist></para>
        <para>When we build your site, we'll give you access to Google Tag Manager, set up some
            initial Analytics tags for you, and get you started. You can then build more tracking or
            hand over access to your SEO consultants. We will continue to need access to tag manager so that we can debug problems and update core code as needed.</para>
    </section>
    <section xml:id="seo-analytics">
        <title>Google analytics</title>
        <para>onCourse injects some additional data into your analytics beyond the standard page views:<itemizedlist>
                <listitem>
                    <para>Transactional sales dollars. Every sale through the website puts the
                        dollar value into your Analytics. So not only can you see how many page
                        views you got from that ad campaign, you can see the dollar value of the
                        sales that generated. You'll discover that the two aren't always correlated.
                        Do you care about ten thousand views from Facebook likes or the 200 real
                        sales from a targeted campaign? This is how you can tell the
                        difference.</para>
                </listitem>
                <listitem>
                    <para>Course and products. Drill down in your data to see where sales are coming
                        from. Getting lots of language course sales from an ad you placed on a
                        friendly site? Great, now you know what works and where to focus your time
                        and money.</para>
                </listitem>
                <listitem>
                    <para>Events. Because we log "add to shopping basket" and other events, you'll
                        be able to see who is engaging with your site but not following through to
                        the end.</para>
                </listitem>
                <listitem>
                    <para>Checkout steps. You can track each step in the checkout process through a
                        Google Analytics acquisition funnel. See where and why people are dropping
                        off.</para>
                </listitem>
            </itemizedlist></para>
        <section>
            <title>Google Analytics Setup</title>
            <para> In order to get data into your Google Analytics account you'll need to complete
                the following steps:
                <orderedlist>
                    <listitem>
                        <para>Create a new <link
                                xlink:href="https://analytics.google.com/analytics/web/">Google
                                Analytics</link> account (or use an existing one). Under <code>Admin
                                > Property > Tracking code</code> look for the tracking id and make
                            a note of it.</para>
                    </listitem>
                    <listitem>
                        <para>Log into <link xlink:href="http://tagmanager.google.com/">Google
                                TagManager</link> and find <code>ish onCourse Google Analytics
                                settings</code> under variables. Put your tracking id in there to
                            replace the dummy one.</para>
                    </listitem>
                    <listitem>
                        <para>Back in Google Analytics, you should soon be able to the Tracking Code
                            status update to show data coming in. Visit your website to generate a
                            bit of traffic.</para>
                    </listitem>
                    <listitem>
                        <para>Enable enhanced ecommerce reporting in the Google Analytics under
                                <code>Admin > View > E-commerce settings</code></para>
                    </listitem>
                    <listitem>
                        <para>Select names for your checkout steps <orderedlist>
                                <listitem>
                                    <para>Empty Cart</para>
                                </listitem>
                                <listitem>
                                    <para>Add Contact</para>
                                </listitem>
                                <listitem>
                                    <para>Edit Contact</para>
                                </listitem>
                                <listitem>
                                    <para>Summary</para>
                                </listitem>
                                <listitem>
                                    <para>Payment</para>
                                </listitem>
                            </orderedlist></para>
                    </listitem>
                    <listitem>
                        <para> Submit changes </para>
                    </listitem>
                </orderedlist>
            </para>
            <para>
                <inlinemediaobject>
                    <imageobject>
                        <imagedata fileref="images/google_analytics_settings.png" scalefit="1"
                            width="100%" contentdepth="100%" format="png"/>
                    </imageobject>
                </inlinemediaobject></para>
            <para>When you have some time, explore the Analytics "goals" setup for ways to get
                useful information such as dropoff in your checkout rates.</para>
            <section>
                <title>Events</title>
                <para>Events are sent to Google Analytics at various points in the checkout process.
                    Along with the event, onCourse sends a rich data structure which you can then
                    report on. The following steps are sent as events:</para>
                <itemizedlist>
                    <listitem>
                        <para>Checkout step: 1 - checkout without
                            any items in cart</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 2 - Add payer
                            screen</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 3 - Edit contact
                            screen</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 4 - Summary
                            screen</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 4 option: Change Parent - change parent for child from
                            summary</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 4 option: Add concession - add concession for
                            contact</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 4 option: Add contact - add contact from summary</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 5 - Payment
                            screen</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 4 option: Add a company - Add a company from payment
                            screen</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 4 option: Add a payer - Add a payer from payment
                            screen</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 4 option: Payment Page (Credit Card) - Payment Page
                            Credit Card tab;</para>
                    </listitem>
                    <listitem>
                        <para>Checkout step: 4 option: Payment Page (Corporate Pass); - Payment Page
                            Corporate Pass tab;</para>
                    </listitem>
                </itemizedlist>
                <para>Add or remove items from shopping cart:</para>
                <programlisting>dataLayer.push({
    'event': 'addToCart' | 'removeFromCart',
    'ecommerce': {
      'currencyCode': 'AUD',
      'add': {
        'products': [{
          'name': {{item_name}},
          'id': {{item_id}},
          'price': {{item_price}},
          'category': 'Course Class' | 'Product',
'quantity': 1,
        }],
      },
    },
  });
</programlisting>
                <para>Set Checkout Page:</para>
                <programlisting>dataLayer.push({
    'event': 'checkout',
    'ecommerce': {
      'checkout': {
        'actionField': {
          'step': {{ 1 | 2 | 3 | 4 | 5 }},
          'option': "Init Checkout Process" | "Add Payer" | "Edit Contact Details" | "Summary Page" | "Payment Page"
        },
        'products': [{ 
         'name':{{item.name}}, 
         'id': {{item.id}}, 
         'price': {{item.price}}, 
         'category': 'Course Class' | 'Product',  
         'quantity': 1, 
        }],
      },
    },
  });

</programlisting>
                <para>Set Checkout Page Option (something like sub page/phase):</para>
                <para>At the moment we have options only for 4,5 steps</para>
                <programlisting>dataLayer.push({
  'event': 'checkoutOption',
  'ecommerce': {
    'checkout_option': {
      'actionField': {
        'step': {{ 4 | 5 }},
        'option': "Change Parent" | "Add concession" | "Add contact" | "Add a company" | "Add a payer" | "Payment Page (Corporate Pass)" | "Payment Page (Credit Card)"
      },
    },
  },
});</programlisting>
                <para>purchase:</para>
                <programlisting>dataLayer.push({
    'event': 'purchase',
    'ecommerce': {
      'purchase': {
        'actionField': {
          'id': {{ data.id }},
          'affiliation': 'credit card' | 'corporate pass',
          'revenue': {{ amount.total }}, // includes tax
        },
        'products': [{ 
         'name':{{ item.name }}, 
         'id': {{ item.id }}, 
         'price': {{ item.price }}, 
         'category': 'Course Class' | 'Product',
         'quantity': 1, 
        }],
      },
    },
  });
</programlisting>
            </section>
        </section>
    </section>
    <section xml:id="seo-webmaster">
        <title>Webmaster tools</title>
        <para><link xlink:href="https://www.google.com/webmasters/tools">Google webmaster
                tools</link> is a useful resource for to you review aspects of your website. Here
            you are able to see your site in the way Google sees it, understand how markup affects
            Google's schema parsing, and see which pages are indexed. Its also an important place to
            tell Google that you've changed domain names, ensuring your SEO isn't left behind on
            your old site.</para>
        <para>In order to log in, Google will give you an html file to upload to your site. Just log
            into webDAV and put that file just inside the 's' folder. Publish your site for Google
            to be able to see this file.</para>
    </section>
    <section xml:id="seo-sitemap">
        <title>Sitemap</title>
        <para>We generate a /sitemap.xml file automatically which you can add to Google's webmaster
            tools. This allows Google to quickly find all the pages on your site without crawling
            through them one at a time, and it also gives Google hints about when those pages are
            updates so that they are crawled more quickly.</para>
    </section>
    <section xml:id="seo-markup">
        <title>HTML markup</title>
        <para>The html markup of your site is customisable throughout, but by default you get some
            robust templates that Google will love.</para>
        <section>
            <title>Semantic HTML</title>
            <para>By building the html of your onCourse site with a clear structure and meaning,
                search engines such as Google are able to make sense of the structure and meaning.
                onCourse comes with good html that gives you a good starting point. For example,
                each page should only have a single h1 element, sections, footer and other modern
                html elements.</para>
        </section>
        <section>
            <title>Accessibility</title>
            <para>Although this is not strictly an SEO benefit, adhering to <link
                    xlink:href="https://www.w3.org/TR/WCAG20/">accessibility standards</link> means
                that students with disabilities such as poor sight will be able to access your
                website more easily. This goes hand in hand with good semantic HTML and also means
                that Google and other search engines will properly index your site and understand
                the content structure rather than just index a mass of words.</para>
        </section>
        <section>
            <title>Schema.org</title>
            <para>Schema.org is a set of markup rules endorsed by Google and other search engines.
                It specifies ways to annotate the html to give it specific meaning allowing Google
                to create rich search results. For example, we can markup data so that Google can
                provide navigation structure, course dates, prices and other information right in
                their search results.<inlinemediaobject>
                    <imageobject>
                        <imagedata fileref="images/schema-results.png" scalefit="1" width="100%"
                            contentdepth="100%" format="png"/>
                    </imageobject>
                </inlinemediaobject></para>
        </section>
    </section>
    <section xml:id="seo-nav">
        <title>Navigation</title>
        <para>The navigation and structure of the site's page are important to good search
            results.</para>
        <section>
            <title>Canonical links</title>
            <para>Some pages in your onCourse site don't last very long. In particular, the class
                pages with a URL like <code>/class/ABC-123</code> will be irrelevant as soon as that
                class is finished. You don't want to accumulate page rank on these pages, only for
                that to evaporate. onCourse automatically adds a canonical link to the correct
                course page, transferring any page rank and inbound links to somewhere it will do
                good.</para>
        </section>
        <section>
            <title>URLs</title>
            <para>onCourse has clean URLs which are easy for users and contribute to your SEO. All
                course detail and list pages contain the word "course" and you are free to create
                long course codes which contain useful SEO keywords. And your tag structure can be
                structured however you want.. For example, a URL like
                "/courses/business/communication" picks up several important keywords.</para>
        </section>
        <section>
            <title>Redirects</title>
            <para>If you ever change URLs it is vital that you don't lose page rank on those old
                pages. While you don't need to worry about classes, tags and course pages can
                accumulate valuable scores and you should implement redirects to the closest new
                page.</para>
        </section>
    </section>
    <section xml:id="seo-meta">
        <title>Meta headers</title>
        <para>onCourse does not implement meta-keyword headers since it is well documented that no
            search engines use them for indexing. However we do implement:<itemizedlist>
                <listitem>
                    <para>og:image for course and class detail pages. The image is pulled from the
                        first attachment of the appropriate type (jpg/png) linked to the
                        course.</para>
                </listitem>
                <listitem>
                    <para>og:type is hardcoded to "website" to satisfy Facebook.</para>
                </listitem>
                <listitem>
                    <para>og:description and meta-description. The contents of this field is
                        automatically populated from the beginning of the text in the course
                        description or page content. Special formatting is stripped out (eg. headers
                        and images). For this reason, it is useful for you to ensure the first
                        paragraph of text is relevant and well written.</para>
                </listitem>
                <listitem>
                    <para>Page title (and og:title) is constructed using the name of your college
                        and other details such as the name of the course or tag, or the name of the
                        page.</para>
                </listitem>
            </itemizedlist></para>
        <para>These tags are useful for both Facebook, Bing and Google, helping you display better
            search results from data discovered by each of their crawl engines.</para>
        <para>Should you wish to customise the behaviour of how onCourse inserts meta headers you
            can do this in PageHead.tml. You can customise the page title in Title.tml</para>
    </section>
    <section xml:id="seo-tls">
        <title>SSL/TLS encryption</title>
        <para>Google has indicated that sites with end-to-end encryption will get higher search
            rankings since they are more likely to be ligitimate sites which care about the privacy
            of their users. All onCourse sites redirect immediately to HTTPS for even the
            non-payment gateway parts of the site.</para>
    </section>
    <section xml:id="seo-speed">
        <title>Page speed</title>
        <para>A lot of effort goes into making onCourse really fast, even when displaying faceted
            search results from thousands of courses. We use separate SSL/TLS load balancers to
            remove encryption load from the application servers, we cache database requests and page
            rendering, and use Apache Solr as a high speed search cache. We also offload large image
            serving to a third party AWS S3 storage, again increasing the speed with which your site
            displays.</para>
        <para>The end result of all this is that search engines give your site bonus points for
            being fast. Which is good.</para>
    </section>

</chapter>
