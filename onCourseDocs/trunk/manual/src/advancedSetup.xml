<?xml version="1.0" encoding="UTF-8" ?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
	version="5.0" xml:id="advancedSetup">
	<title>Advanced Setup and Configuration</title>
	<para>This chapter outlines the other setup options beyond the General Preferences set up, and
		advanced configuration options for access control, users and groups, using external
		databases and server memory allocation.</para>
	<para>All of these options are available from the File > Preferences menu</para>
	<section>
		<title>Financial Setup</title>
		<section>
			<title>Finances and Accounting</title>
			<section>
				<title>Account set up</title>
				<para>onCourse has full general ledger capabilities, ensuring you are always aware of your
					profit and loss, liabilities and cash position.</para>
				<para>To edit or add general ledger accounts, go to 'Financial' -> 'Accounts'</para>
				<para>You can create your own accounts as needed, by selecting the '+' option. </para>
				<para>Accounts no longer needed can be disabled.</para>
				<para>A range of reports are available to keep you on top of your financial position.Refer to the chapter on <link
					xlink:href="#reports">Reports</link> for more information.</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" width="100%" contentdepth="100%" fileref="images/AccountSetUpWindow.png"
							format="png" />
					</imageobject>
					<caption>
						<para>Accounts window, use the + symbol to add new Accounts</para>
					</caption>
				</mediaobject>
			</section>
			<section>
				<title>Financial Preferences</title>
				<para>Navigate here by clicking on “File” -> “Preferences” -> “Financial” from the top
					menu.</para>
				<para>Select the currency you wish to use and any local tax (e.g.GST) which may
					apply.</para>
				<para>Default accounts have been selected. Make any changes necessary or edit the accounts
					to add or disable options.</para>
				<para>If your college usually takes payment at the time of enrolment, then we
					suggest you leave the option 'Quick enrol payments default to $0' unchecked. If
					you usually invoice clients for payment, then select this option so you do not
					always have to override Quick Enrol.</para>
				<para>You can also set up your default for your nominated Pre Paid Fees account, as well as
					determining whether the deferred income is transferred from your Pre Paid Fees
					Liability Account to your Income Account evenly across all Sessions of the
					Class. Or alternatively you can nominate to transfer all funds across after the
					completion of the first session of the Class. Refer to the chapter on <link
						xlink:href="#accounting">Accounting</link> for more information about
					deferred income.</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" width="100%" contentdepth="100%" fileref="images/FinancialPreferences.png"
							format="png" />
					</imageobject>
					<caption>
						<para>Setting Financial Preferences within the onCourse Client</para>
					</caption>						
				</mediaobject>
			</section>
		</section>
		<section>
			<title>Tags</title>
			<para>Tags are a way to customise onCourse to group and sort data based on your business
				rules. They are also integral to website navigation. Refer to the chapter on <link
					xlink:href="#tagging">tags</link> for more information.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%" fileref="images/TagGroups.png"
						format="png" />
				</imageobject>
				<caption>
					<para>onCourse Tag Groups</para>
				</caption>
			</mediaobject>
		</section>
		<section>
			<title>Custom fields</title>
			<para>You can create custom fields for contacts which are searchable. This allows you to create
				fields for, and record information that is particular to your business. Some examples of how
				this field may be used are payroll numbers, licence numbers, student numbers that stay with
				the student between training organisations and date of initial contact. These fields can be
				made mandatory. You can add as many additional fields as you need to, that apply to contacts.
				These fields will appear on the bottom of the 'general' tab in each contacts record.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%" fileref="images/NewCustomField.png"
						format="png"/>
				</imageobject>
				<caption>
					<para>Create a new custom field </para>
				</caption>
			</mediaobject>
		</section>
		<section>
			<title>Concession types</title>
			<para>In many organisations and businesses, discounts are offered to customers based on special
				group membership or criteria such as students, special card holders etc.</para>
			<para>In onCourse, we can use Concession Types to define which groups of people have access to discounts by:</para>
			<itemizedlist>
				<listitem>
					<para>Associating the concession type to contact record by editing contacts/students;
						and</para>
				</listitem>
				<listitem>
					<para>Associating the concession type to a discount (see documentation on <link
						xlink:href="#discounts">creating
						discounts)</link></para>
				</listitem>
			</itemizedlist>
			<para>Some concession types may be available for your students to add to their own record during
				the online enrolment process, for example a Senior's Card. Other types you may want
				to restrict to only allowing the concession to be added to the student record via
				the onCourse client, for example College Staff. </para>
			<para>If you require an expiry date on the concession type, any discounts that apply to
				that concession type will not be available if the student's concession is
				expired.</para>
			<para>You may also choose to make entering a card number mandatory. Please note onCourse
				is not able to validate the authenticity of card numbers due. This is an open test
				field (string type) and will accept letters and numbers.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%" fileref="images/create_concession.png"
						format="png" />
				</imageobject>
				<caption>
					<para>Defining the parameters of a concession type for Seniors</para>
				</caption>
			</mediaobject>
			<example>
				<title>How to create a concession type</title>
				<orderedlist>
					<listitem>
						<para>Go to File -> Preferences -> Concession Types</para>
					</listitem>
					<listitem>
						<para>Click the add button ( + )</para>
					</listitem>
					<listitem>
						<para>Name your concession type and choose if you want it to be available for self selection
							on the web, if it requires a number or has an expiry date.</para>
					</listitem>
				</orderedlist>
				<para>Once you have created the concession type, go to discounts to define who can use it and
					how it can be used.</para>
			</example>
		</section>
		<section>
			<title>Contact relation types</title>
			<para>You can define how you relate contacts to each other via contact relation types. Some types
				are already defined by default, but you can edit or delete them as needed.</para>
			<para>A special, non-editable relationship for 'Parent or Guardian' and 'Child' is used
				to collect the emergency contact details for minors enrolling via the web. </para>
			<para>A relationship has two sides i.e. parent and child. Some times both sides will
				have the same name e.g. partner and partner. Relationships can be used to link
				contacts together for payment and enrolment purposes e.g. when an employer pays for
				their staff member, and also for marketing e.g. to define the HR Managers at
				companies you deliver training to, so you can promote up coming courses.</para>
			<para>For each type of relationship you define you have the option of allowing the first
				type of contact to access the training record of the secondary type of contact via
				the SkillsOnCourse portal. </para>
			<para>To add or edit relationships, go to File > Preferences > Contact Relationship
				Types and create a new record.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="60%" contentdepth="60%"
						fileref="images/contact_relationship_list.png" format="png" />
				</imageobject>
				<caption>
					<para>Contact Relation Type list view</para>
				</caption>
			</mediaobject>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%"
						fileref="images/contact_relationship_edit.png" format="png" />
				</imageobject>
				<caption>
					<para>Contact Relation Type edit view</para>
				</caption>
			</mediaobject>
		</section>
		<section>
			<title>Reports</title>
			<para>The report window shows a list of all the reports included in the onCourse software,
				including sub reports. More information about reports and exports can be found in
				the  <link xlink:href="#reports">reporting chapter</link></para>
			<para>This is where you can add or export the existing report templates for you to
				customise.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%" fileref="images/ReportsWindow.png"
						format="png"/>
				</imageobject>
				<caption>
					<para>Reports window of onCourse</para>
				</caption>
			</mediaobject>
		</section>
			<section>
				<title>Export templates</title>
				<para>This screen lists all the available export templates. Both XML and CSV templates are
					available for most data within onCourse, allowing you to export your onCourse data for use
					with other types of software, like spreadsheets, other databases and desktop publishing tools.
					If you create your own custom exports, or commission ish to create some on your behalf, you
					can add them to onCourse by clicking the <guibutton>+</guibutton>,  locating the export
					template on your computer, and importing it into onCourse. The template will be immediately
					added to the list. If the template already existed and this was just an updated template, then
					the version number will be incremented.</para>
			<para>Export templates can be exported using the cogwheel function for your to edit and
				customise.</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" width="100%" contentdepth="100%" fileref="images/export_tab.png"
							format="png" />
					</imageobject>
					<caption>
						<para>The "Export" window</para>
					</caption>
				</mediaobject>
			</section>
		<section>
			<title>Email Templates and Scripts</title>
			<para>These templates are the emails that are sent automatically based on scripted events like on
				enrolment, or as part of daily reports.</para>
			<para>By default, only emails and scripts relating to Enrolment confirmations, tax
				invoices and voucher purchases are active in all new onCourse installations. You can
				active and de-activate other scripts are required.</para>
			<para>We recommend you customise the fixed text in these templates to meet your own
				terms and conditions for payment, refunds and transfers.</para>
			<para>Both plain text and HTML templates are included and can be edited. You can also add your
				own templates and scripts to onCourse. </para>
			<para>These templates also require you to complete some contact details, for example the AVETMISS
				details, to generate your college email, phone and web address.</para>
			<para>More information is available in the <link xlink:href="#emailTemplates">Email template chapter</link> and the <link xlink:href="#scripts">Scripts chapter</link>  </para>
		</section>
		<section>
			<title>Tutor Roles</title>
			<para>Tutor roles are related to the payroll function. Defining a variety of tutor roles allows
				you to define a range of payrates that apply to your teaching staff. More
				information is available in the <link xlink:href="#payroll">payroll chapter</link></para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%" fileref="images/TutorRoles.png"
						format="png" />
				</imageobject>
				<caption>
					<para>Defining Tutor Roles</para>
				</caption>
			</mediaobject>
		</section>
		</section>
	<section>
		<title>Enabling advanced onCourse Features</title>
		<para>Extend capabilities of onCourse by contacting us and enabling:</para>
		<itemizedlist>
			<listitem>
				<para>An automatically updated website that is capable of web enrolments </para>
			</listitem>
			<listitem>
				<para>Credit card processing (via website and onCourse client) </para>
			</listitem>
			<listitem>
				<para>Delivery of SMS messages to students, tutors, classes or any contact with a mobile
					number within onCourse.</para>
			</listitem>
			<listitem>
				<para>Budgeting</para>
			</listitem>
			<listitem>
				<para>Access Control (more about this below)</para>
			</listitem>
			<listitem>
				<para>External database choices </para>
			</listitem>
		</itemizedlist>
		<para>To do this you'll need to contact ish for a user name and password to activate those
			features. You will be able to enter those details in your preferences within onCourse and your
			website will be automatically updated. </para>
	</section>
	<section xml:id="advancedSetup-accessControl">
		<title>Access Control (authorisation)</title>
		<para>Access control in onCourse has the ability to assign different access rights and roles to
			different users in your organisation. There are two main aspects of Access control,
			"Users" and "Access". Access rights restrict what parts of onCourse users can modify,
			print, view or delete. This is an advanced feature, available for onCourse "Professional
			and Enterprise" customers. Four pre-defined user roles are available within the system,
			Enrolment Officer, Administration Manager, Course Manager and Financial Manager. You can
			modify these and create new access rights groups as needed. Each user within your
			organisation can be given Admin access rights (full access) or be added to any of your
			access groups. Select the access rights when creating or editing user profiles, as
			above.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" width="100%" contentdepth="100%"
					fileref="images/access_control_menu.png" format="png" />
			</imageobject>
			<caption>
				<para>"Users" and "Access" menus</para>
			</caption>
		</mediaobject>
		<section>
			<title>Users</title>
			<para>Go to File -> Preferences and select Users Add the names, user names and passwords for
				each onCourse user. There are no limits to the number of users in onCourse. Users can be
				deactivated if they leave your organisation.</para>
			<itemizedlist>
				<listitem>
					<para>Login - What you use along with the password to login into onCourse e.g: Login :
						John</para>
				</listitem>
				<listitem>
					<para>Password</para>
				</listitem>
				<listitem>
					<para>First Name</para>
				</listitem>
				<listitem>
					<para>Last Name</para>
				</listitem>
				<listitem>
					<para>Default administration centre - The Default administration centre refers to the
						physical site where your staff are working. From the drop down menu select that site.
					</para>
				</listitem>
				<listitem>
					<para>Email</para>
				</listitem>
				<listitem>
					<para>Active - selecting this allows the user to login to onCourse. If active is not
						selected, the user will receive an "authentication failed" message at the onCourse login
						screen.</para>
				</listitem>
				<listitem>
					<para>Admin - Checking this will allow the user to be an admin, they will have many access
						rights and can assign roles and rights to other users.</para>
				</listitem>
				<listitem>
					<para>Last logged on - not editable, just tells you when that user last logged on.</para>
				</listitem>
			</itemizedlist>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%"
						fileref="images/users_screenshot.png" format="png" />
				</imageobject>
				<caption>
					<para>The "new user" window</para>
				</caption>
			</mediaobject>
			<tip>
				<para>If your College has more than one Administration Centre, it is possible to switch between
					these centres whilst a user is logged in by selecting the relevant centre from
					the home splash screen of the onCourse client as shown in the following example. </para>
			</tip>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%"
						fileref="images/reset_admin_site_login.png" format="png" />
				</imageobject>
				<caption>
					<para>Switching the administration centre</para>
				</caption>
			</mediaobject>
		</section>
		<section>
			<title>Access</title>
			<para>To access the "Users" menu, in onCourse go to File > Preferences > Access.</para>
			<para>Here you can create roles for users, such as "Administration Manager." Some default access
				roles have been created in onCourse however you should edit these and create roles
				applicable to your own organisation.</para>
			<para>Each onCourse user should be assigned to a user role that defines their access
				levels, by default all new users created will have full admin access to all aspects
				of onCourse.</para>
			<para>You can edit an existing access role by double clicking on it, or create new
				access roles using the + button in the top right hand corner of the window.</para>
			<itemizedlist>
				<title>Before we delve into the specifics of the Access menu, it's important to know what each
					option means. If an option like "create" is greyed out, it means that part of
					onCourse can't be restricted.</title>
				<listitem>
					<para>View - a view permission only allows the contact to see data already created, but does
						not allow existing records to be edited or new records to be created.</para>
				</listitem>
				<listitem>
					<para>Edit - Allows both edit and view rights.</para>
				</listitem>
				<listitem>
					<para>Create - Allows the creation of new records, edit and view rights.</para>
				</listitem>
				<listitem>
					<para>Delete - Allows record deletion where permitted by onCourse validation. Linked and locked
						records can not be deleted just because a user has delete rights.</para>
				</listitem>
				<listitem>
					<para>Print - Allows printing of reports associated with this record type</para>
				</listitem>
				<listitem>
					<para>Allow - some process have one level of access only - allow. If this option
						is not ticked, it means the ability to run the process is denied.</para>
				</listitem>
			</itemizedlist>
			<itemizedlist>
				<title>What can you edit in the "Access" menu?</title>
				<listitem>
					<para>Name - here you define the name of the role, e.g; "Administration Manager".</para>
				</listitem>
				<listitem>
					<para>People and companies</para>
					<itemizedlist>
						<listitem>
							<para>Contact &lt;- this refers to all onCourse students, tutors and companies. Full create
								rights are recommended for any user who needs to process enrolments
								as new contacts are often created at this time.</para>
						</listitem>
						<listitem>
							<para>Users &lt;- this refers to the administrative staff who use onCourse and need a log in
								created.</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>Course Management</para>
					<itemizedlist>
						<listitem>
							<para>Course &lt;- permission to work with any course type, including traineeships,
								Vocational and non-vocational courses</para>
						</listitem>
						<listitem>
							<para>VET course details &lt;- this only relates to adding or removing unit of competency
								details from a course</para>
						</listitem>
						<listitem>
							<para>Class &lt;- permission to work with any class type</para>
						</listitem>
						<listitem>
							<para>Enrolment outcomes &lt;- only edit rights are editable. This allows the user to set
								outcome results or change the outcomes linked to a student's
								record</para>
						</listitem>
						<listitem>
							<para>Budget &lt;- viewing the class budget can be disabled</para>
						</listitem>
						<listitem>
							<para>Session &lt;- this permission relates to sessions as they belong to classes</para>
						</listitem>
						<listitem>
							<para>Waiting list &lt;- permission to work with all wait list records</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>VET Management</para>
					<itemizedlist>
						<listitem>
							<para>Qualification reference data &lt;- the only permission available here is edit, allowing
								you to add your choice of nominal hours. All reference data is
								centrally managed by ish.</para>
						</listitem>
						<listitem>
							<para>Certificate &lt;- this relates to VET Statements of Attainment and
								Qualifications only. All contacts with class print permissions can
								create non-vocational certificates of attendance.</para>
						</listitem>
						<listitem>
							<para>Print certificate without verified USI &lt;- This allows VET
								certificates to be printed when the student has a USI on record that
								has not yet been verified. A warning to the user will still be
								shown. This only applies to certificates created after
								1/1/2015</para>
						</listitem>
						<listitem>
							<para>Print certificate without USI &lt;- This allows VET certificates
								to be printed when the student has no USI on record. A warning to
								the user will still be shown. This only applies to certificates
								created after 1/1/2015</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>Resources</para>
					<itemizedlist>
						<listitem>
							<para>Site &lt;- view can not be disabled</para>
						</listitem>
						<listitem>
							<para>Room &lt;- view can not be disabled</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>Financial</para>
					<itemizedlist>
						<listitem>
							<para>Enrolment &lt;- Create permission needed for an onCourse user to use Quick Enrol</para>
						</listitem>
						<listitem>
							<para>Custom enrolment discount &lt;- Allow permission gives the ability for any manual
								discount to be added to any enrolment processed through Quick
								Enrol.</para>
						</listitem>
						<listitem>
							<para>Discount &lt;- This permission relates to the creation of discount strategies.
								Discounts will auto apply to any applicable enrolment regardless of
								permission here.</para>
						</listitem>
						<listitem>
							<para>Tutor roles &lt;- These roles determine pay rates for teaching staff</para>
						</listitem>
						<listitem>
							<para>Tutor pay &lt;- This permission relates to the creation and editing of payslips</para>
						</listitem>
						<listitem>
							<para>Invoice &lt;- This permission relates to the creation of manual invoices (invoices not
								created as part of the Quick Enrol process)</para>
						</listitem>
						<listitem>
							<para>Credit note &lt;- Allow the creation of manual credit notes. This permission is not
								needed for the creation of automatic credit notes during enrolment
								or class cancellation.</para>
						</listitem>
						<listitem>
							<para>Payment In &lt;- Permission relates only to manual payment in records, not those
								created during Quick Enrol.</para>
						</listitem>
						<listitem>
							<para>Payment Out &lt;- This permission is about creating refunds, usually processed in real
								time back to payer's credit cards</para>
						</listitem>
						<listitem>
							<para>Purchase </para>
						</listitem>
						<listitem>
							<para>Account &lt;- Account settings for onCourse chart of accounts</para>
						</listitem>
						<listitem>
							<para>Transaction &lt;- general ledger transaction records created during all financial
								transactions. These can only be viewed, never edited or manually
								created.</para>
						</listitem>
						<listitem>
							<para>Financial preferences &lt;- The onCourse preferences that set the default accounts for
								various transaction types</para>
						</listitem>
						<listitem>
							<para>Banking &lt;- Allow permission to run the bank process</para>
						</listitem>
						<listitem>
							<para>Reconciliation &lt;- Allow permission to reconcile payments</para>
						</listitem>
						<listitem>
							<para>Corporate pass &lt;- Permissions relating to the creation or
								editing or CorporatePass. This permission is not required to process
								a website enrolment that uses a CorporatePass for payment.</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>Special actions</para>
					<itemizedlist>
						<listitem>
							<para>Class duplication/rollover &lt;- Allow duplication of one or more classes from existing
								class(es)</para>
						</listitem>
						<listitem>
							<para>Class cancellation &lt;- Cancellation process that prevents further enrolments and
								creates credit notes for existing enrolments</para>
						</listitem>
						<listitem>
							<para>Exporting to inDesign &lt;- Export of class information for brochure production</para>
						</listitem>
						<listitem>
							<para>Creating certificate from class &lt;- Bulk certificate creation process for VET and
								non-VET enrolments</para>
						</listitem>
						<listitem>
							<para>Contact merging &lt;- Merge duplicate student records</para>
						</listitem>
						<listitem>
							<para>Enrolment cancellation &lt;- Cancel individual enrolments and create a credit
								note</para>
						</listitem>
						<listitem>
							<para>Export AVETMISS &lt;- Export training data for government reporting</para>
						</listitem>
						<listitem>
							<para>Data import &lt;- import data into onCourse</para>
						</listitem>
						<listitem>
							<para>Export DET AVETMISS &lt;- Export training data for NSW funding programs</para>
						</listitem>
						<listitem>
							<para>Override tutor payrate &lt; - Allow a local override at the class level to any manually
								set payrate</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>Messaging</para>
					<itemizedlist>
						<listitem>
							<para>Email up to 50 contacts &lt;- Allow permission useful for admin staff who may need to
								notify a class of students about changes</para>
						</listitem>
						<listitem>
							<para>Email over 50 contacts &lt;- Allow permission most appropriate to marketing
								staff</para>
						</listitem>
						<listitem>
							<para>SMS up to 50 contacts &lt;- Allow permission useful for admin staff who may need to
								notify a class of students about changes</para>
						</listitem>
						<listitem>
							<para>SMS over 50 contacts &lt;- Allow permission most appropriate to marketing staff</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>Web and content management</para>
					<itemizedlist>
						<listitem>
							<para>Documents &lt;- Permissions relating to documents used on the public website, inside
								onCourse and available via the portal</para>
						</listitem>
						<listitem>
							<para>Tag &lt;- Permission relating to all tag groups, including those that drive the website
								navigation. This permission is not required to add tags to records,
								only to edit tag groups.</para>
						</listitem>
						<listitem>
							<para>Web page </para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>Other</para>
					<itemizedlist>
						<listitem>
							<para>Report</para>
						</listitem>
						<listitem>
							<para>General preferences &lt;- Relates to onCourse application preferences that affects all
								users</para>
						</listitem>
						<listitem>
							<para>Change administration centre </para>
						</listitem>
						<listitem>
							<para>Concession type &lt;- Permission to modify available concessions.
								This permission is not needed to add concession types to contact
								records.</para>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%"
						fileref="images/access_window.png" format="png" />
				</imageobject>
				<caption>
					<para>Setting access rights for an administration manager role</para>
				</caption>
			</mediaobject>
		</section>
		<section>
			<title>Setting up Active Directory (AD) authentication and authorisation.</title>
			<para>The below example has been completed with Windows Server 2003 R2 SP2 and onCourse
				1.7.13. onCourse has the ability to use an external LDAP/AD server for authentication and
				authorisation, what we mean by this is that you do not need to use the onCourse user and
				group database but you can use your already setup AD database. Firstly on your Windows
				Server 2003 Machine go to "My Computer" right click and select "Properties" and you will
				find the following screen.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%"
						fileref="images/Windows_2003_system_properties.png" format="png" />
				</imageobject>
			</mediaobject>
			<para>Please take careful note of the "Full Computer Name" and the "Domain" as with this
				information you now have the building blocks for our configuration.</para>
			<para>Now the next thing we need to get the LDAP/AD authentication working is either the
				Administrator password or, a user account which is a member of the Administrators group.
				This is because when a query happens on the AD server it is required to login first before
				it can do any searches on users. If your administrators want to lock it down further they
				are welcome to do so, we only need read access to all user and group objects in the AD as
				well as the passwords for all of those users. So now we enter "Active Directory Users and
				Computers" and create our user: <mediaobject>
					<imageobject>
						<imagedata scalefit="1" width="100%" contentdepth="100%"
							fileref="images/Create_a_win_2003_user.png" format="png" />
					</imageobject>
				</mediaobject> and add it to the administrators group and remember your password!</para>
			<para>Now we have everything we need! Complete the setup screen as follows:</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%"
						fileref="images/onCourse_LDAP_AD_screen_setup.png" format="png" />
				</imageobject>
			</mediaobject>
			<para>Once you have substituted all of the settings as necessary press the "Test Connection"
				button to ensure that onCourse can bind to the LDAP server. Once that works, you can then go
				to the "Users" section of this configuration page and place "sAMAccountName" and
				(objectClass=user) for the search filter. Now test a user in your domain and see if it
				authenticates. If it works, congratulations you are now authenticating against your AD
				server!</para>
		</section>
		<section>
			<title>AD Authorisation</title>
			<para>Authorisation is the process of giving your users the correct rights when they are
				logged in, this has a direct relationship with the different roles you can setup or create
				within onCourse. If you wish to use your AD server to allocate roles to your users, complete
				the following:</para>
			<para>At the top of your "Active Directory Users and Computers" create an "Organizational
				Unit" (OU) and call it "onCourse".</para>
			<para>In that OU create security groups which reflect the names of the roles in onCourse. Say
				for example the roles which are build into onCourse (you can find this in "File" -->
				"Preferences" --> "Access" in onCourse):</para>
			<para>
				<itemizedlist>
					<listitem>
						<para>Administration Manager</para>
					</listitem>
					<listitem>
						<para>Course Manager</para>
					</listitem>
					<listitem>
						<para>Enrolment Officer</para>
					</listitem>
					<listitem>
						<para>Financial Manager</para>
					</listitem>
				</itemizedlist>
			</para>
			<para>You can add or delete roles here as you wish but a corresponding group must exist in AD
				for the authorisation/access rights to be allocated.</para>
			<para>When you have created those groups in AD add the necessary users who belong to each
				group.</para>
			<para>We can then turn it on the onCourse preferences under LDAP/Authorisation and Roles and
				set it up the same as the following picture:</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%"
						fileref="images/LDAP_AD_authorisation_settings.png" format="png" />
				</imageobject>
			</mediaobject>
			<para>That is all for Windows Server AD/LDAP authentication and authorisation! good
				luck!</para>
		</section>
	</section>
	<section xml:id="advancedSetup-serverconfigurationfile">
		<title>Server configuration file</title>
		<para>Sometimes the onCourse server defaults aren't perfect for your office. Ports may be
			blocked, another server might already be set up. We've added the ability to specify useful
			parameters in a configuration file that onCourse Server will check on startup. </para>
		<para>Create a text file called with the name “onCourse.cfg” and place in the same folder as the
			onCourse Server executable, whether that be running on Windows (.exe), OSX (.app) or
			Unix/Linux (.jar). </para>
		<para> The directives allowed in this file are:
			<programlisting>
		ip – specify which IP addresses to listen on. Repeat this line as many times as you require.
		port – specify which port to listen on for non-SSL client connections (Specify the port as 0 to disable non-SSL connections)
		ssl_port – specify which port to listen on for SSL client connection. (Specify the port as 0 to disable SSL connections)
		db – specify and URI for your database.
		max_concurrent_users - maximum number of users who can connect at once
		client_server_compression_level - compression between client and server connection. 0 is off, 6 is default and 9 is the maximum compression setting. More compression uses more CPU at each end.
	 </programlisting></para>
		<para> A sample onCourse.cfg might contain:
			<programlisting>
		port=0
		ssl_port=8182
		db=jdbc:mysql//db.example.com/onCourse
		ip=192.168.0.1
		ip=192.168.0.2
		max_concurrent_users=10
		client_server_compression_level=8
			</programlisting></para>
		<para>examples of URLs for internal Derby database (OS X, FreeBSD):
			<programlisting>
		db=jdbc:derby:/Users/admin/onCourse/
		db=file:/Users/admin/onCourse/
</programlisting></para>
		<para>examples of URLs for internal Derby databse (Windows):<programlisting>
		db=jdbc:derby:/C:/onCourse/
		db=file:/C:/onCourse/
				</programlisting><note>
				<para>
					<simplelist>
						<member> use 3 slashes after the protocol name “file” in both cases </member>
						<member> use /, not \ also under Windows </member>
						<member> onCourse will replace all white spaces with “%20”, If you use windows or there
							are white spaces in the URI path you must surround the URI with “. </member>
					</simplelist>
				</para>
			</note></para>
	</section>
	<section>
		<title>Using an external database</title>
		<para>In order to connect to external databases such as MySQL and MS SQL, onCourse Server needs
			to know where the external database lives. This can be done by using a server configuration
			file, see <xref xlink:href="#serverconfigurationfile" /> below. Starting the server with
			special arguments (in the cases of headless configurations commonly found on Unix-derivative
			systems such as FreeBSD, Linux and Solaris), or choosing the external database option through
			GUI when first starting onCourse Server. <note>
				<para>connecting to an external database is a paid for feature, you must contact us to
					enable it. </para>
			</note></para>
		<para>A valid URI contains the following information: <simplelist>
				<member> host, e.g. 203.29.62.146 or delish.ish.com.au </member>
				<member> port, e.g. 1376, 3306 or 1521 </member>
				<member> database name, e.g. onCourse </member>
				<member> user name, e.g. oncourse </member>
				<member> password, e.g. oncourse </member>
				<member> every vendor has its own URI (URL) format which has to be used (remind quotations)
				</member>
			</simplelist> MS SQL Server:
			<programlisting>
				  db=jdbc:jtds:sqlserver://&lt;host>:&lt;port>/&lt;dbName>;user=username;password=password
				  db=jdbc:jtds:sqlserver://203.29.62.146:1376/onCourse;user=oncourse;password=oncourse
				</programlisting>
			MySQL:
			<programlisting>
				  db=jdbc:mysql://&lt;host>:&lt;port>/&lt;dbname>?user=username&amp;password=password
				  db=jdbc:mysql://delish.ish.com.au:3306/onCourse?user=oncourse&amp;password=oncourse
				</programlisting>
			It is not necessary to specify a port, if the default port is used. </para>
		<para> More information about URIs at <link
				xlink:href="http://blogs.msdn.com/ie/archive/2006/12/06/file-uris-in-windows.aspx"
				>http://blogs.msdn.com/ie/archive/2006/12/06/file-uris-in-windows.aspx</link>
		</para>
	</section>
	<section>
		<title>Server Memory Allocation</title>
		<para>In addition, you can specify a different memory utilisation for onCourse Server. onCourse
			Server will try to use all the memory you allocate to it, since it makes use of that memory
			for caching. Up to a certain point, adding more memory will help, but after that more memory
			will have no effect or even slow things down since the server has more work to do managing all
			that cache. You will have to tune your settings according to your own needs, but the default
			will do fairly well for most installations.</para>
		<para>If you are running Linux or Unix, you will find the necessary settings in the startup
			script. On Windows you need to create a text file with the name onCourseServer.vmoptions or
			onCourseService.vmoptions. The name of this file before the dot must match exactly the name of
			your executable before the dot. In that file put
			this:<programlisting>-Xmx1500M</programlisting></para>
		<para>That will increase the cache to 1500 Mb for onCourse Server. About another 80Mb will be
			used by the application itself, so the total usage will be those two combined. On Windows
			32bit, never go past 1.5Gb for onCourse because of limitations in Windows. A Unix or OSX 32bit
			environment will allow you to assign up 3.5Gb.</para>
		<para>The onCourseServer.log will report errors of java.lang.OutOfMemoryError if you have given
			the onCourse Server insufficient RAM for your usage requirements. Prior to this your end users
			may also detect processing errors, such as failing enrolments.</para>
		<para>Beyond what you have allocated to onCourse, make sure the server has sufficient RAM to run
			the operating system and other applications. It is very important that the server doesn't swap
			memory to disk at any time or you will encounter major performance problems.</para>
		<para>In a 64bit operating system you can install more than 4Gb of RAM in the server memory. OS
			X users will be running 64bit by default. We recommend installing 64bit operating systems for
			all servers.</para>
	</section>
	<section>
		<title>Help, Support and Log files</title>
		<para>The onCourse server application and the onCourse client application both create daily log
			files. The onCourse server log levels are set by the onCourse database manager inside
			the config file. The onCourse client logging can be set from inside the onCourse
			application.</para>
		<para>In the Help menu, select the option 'Set log level' and choose from DEBUG, INFO or
			WARN (default). </para>
		<para>If you need to access your client log files you can find them in the OS User home
			directory, or use the tool inside the onCourse Help menu to open the folder directly
			'Show onCourse client logs..'. Historical log files will be zipped and include the date
			they were logging within the file name. The current log file being written will be
			called onCourse.log.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" width="100%" contentdepth="100%"
					fileref="images/set_log_level.png" format="png" />
			</imageobject>
			<caption>
				<para>The onCourse client Help menu</para>
			</caption>
		</mediaobject>
	</section>
</chapter>
