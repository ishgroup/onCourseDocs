<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    version="5.0" xml:id="externalintegrations">
    <title>External Integrations</title>
    <section xml:id="externalintegrations-integrationsPrefs">
        <title>Integration Preferences</title>
        <para>onCourse allows you to create integration points with a number of popular commercial
            tools. These integrations allow you to create your own links to external services and
            products you have purchased, and define with a corresponding script how onCourse
            utilises these services.</para>
        <para>You can find all the current built in integrations by go File -> Preferences ->
            General. Then click on the 'Add' button next to the heading 'INTEGRATIONS' to see all
            the integrations, as shown below.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/integration_prefs.png" format="png"/>
            </imageobject>
            <caption>
                <para>Integration preferences window</para>
            </caption>
        </mediaobject>
        <section xml:id="externalintegrations-moodle">
            <title>Moodle</title>
            <para>Moodle is a free, open-source PHP web application for producing modular
                internet-based courses that supports a modern social constructionist
                pedagogy.</para>
            <para>To add a Moodle integration you will need to click on the 'Add' button below the
                Moodle icon. You will then see a number of fields that are needed to enable the
                integration. Each field <emphasis role="underline">must</emphasis> be filled out, or
                else the integration scripts will fail.</para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para><emphasis role="bold">Base URL</emphasis> - The URL of your Moodle
                            instance. This must include the 'http://' or 'https://' protocol at the
                            beginning of the URL.</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Username &amp; Password</emphasis> - The
                            username and password used to access your Moodle instance</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Service Name</emphasis> - The name of your
                            integration inside Moodle</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Only activate for enrolments in courses tagged
                                with</emphasis> - This defines which tag the script should look for
                            when executing. All courses tagged with this tag will be included in the
                            integration</para>
                    </listitem>
                </itemizedlist>
            </para>
            <para><emphasis role="bold">IMPORTANT:</emphasis> For this to work, courses to be
                integrated with Moodle are required to have a specific user-created tag associated
                with them that must be created separately in the Preferences > Tags screen. <link
                    xlink:href="#tagging-creatingTags">You can see how to do that here</link>. The
                bottom field 'Only activate for enrolments in courses tagged with' is where the name
                of this tag is defined, so you must make sure the name you put in here matches the
                name of the tag you created precisely.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="70%" contentdepth="70%"
                        fileref="images/moodle_prefs.png" format="png"/>
                </imageobject>
                <caption>
                    <para>Moodle integration preferences</para>
                </caption>
            </mediaobject>
            <para>Once these preferences have been defined you will need to enable the 'moodle
                enrol' script to automatic the process. The Moodle script can be found by going File
                -> Preferences -> Scripts, doubling clicking on 'moodle enrol', clicking on the
                checkbox 'Enabled' and saving the script.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="70%" contentdepth="70%"
                        fileref="images/moodle_script.png" format="png"/>
                </imageobject>
                <caption>
                    <para>Moodle enrol script</para>
                </caption>
            </mediaobject>
            <section>
                <title>Where to find the preferences in Moodle</title>
                <para>Below are the steps that are needed to be done to enable the Moodle
                    integration.</para>
                <orderedlist>
                    <listitem>
                        <para>The Base URL is the site url (e.g. http://localhost:8888/moodle29/).
                        </para>
                    </listitem>
                    <listitem>
                        <para>To create a user go to Site administration -> Users -> Accounts -> Add
                            a new user</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_1._Create_user.png" format="png"/>
                            </imageobject>
                            <caption>
                                <para>Creating a user</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>To assign user to a role go to Site administration -> Users ->
                            Permissions -> Assign system roles</para>
                    </listitem>
                    <listitem>
                        <para>To add a service go to Site administration -> Plugins -> Web services
                            -> External services. When you are on the page click on 'Add' and fill
                            in the Service Name and Short Name, then click on 'Add service'</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_3.1_External_Services_screen.png"
                                    format="png"/>
                            </imageobject>
                            <caption>
                                <para>External services screen</para>
                            </caption>
                        </mediaobject>
                        <para>When you are on this page click on 'Add' and fill in the Service Name
                            and Short Name, then click on 'Add service'</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_3.2_Create_Service.png" format="png"/>
                            </imageobject>
                            <caption>
                                <para>Adding the service</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>Once the Service is created click on 'Add functions'</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_4.1_Functions_screen.png" format="png"/>
                            </imageobject>
                            <caption>
                                <para>Functions page</para>
                            </caption>
                        </mediaobject>
                        <para>Add following functions: core_user_create_users, core_user_get_users,
                            core_course_get_courses, enrol_manual_enrol_users</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_4.2_Add_Functions.png" format="png"/>
                            </imageobject>
                            <caption>
                                <para>Adding the functions to the service</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>The next step is to generate the token, you can do this by going to
                            Site administration -> Plugins -> Web services -> Manage tokens then
                            click on 'Add'.</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_5.1_Token_screen.png" format="png"/>
                            </imageobject>
                            <caption>
                                <para>Manage tokens page</para>
                            </caption>
                        </mediaobject>
                        <para>Then select the created user and service, and if needed Enable and Set
                            'Valid Until' date</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_5.2_Create_token.png" format="png"/>
                            </imageobject>
                            <caption>
                                <para>Create token page</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>The last step is to create a course, you can do this by going to Site
                            administration -> Courses -> Manage courses and categories, then Create
                            new course. The ID should be the same as course code in onCourse.</para>
                    </listitem>
                </orderedlist>
            </section>
        </section>
        <section xml:id="externalintegrations-mailChimp">
            <title>MailChimp</title>
            <para>MailChimp is an online email marketing solution to manage contacts, send emails
                and track results.</para>
            <para>There are three types MailChimp integrations available in onCourse:</para>
            <orderedlist>
                <listitem>
                    <para><emphasis role="bold">mailchimp subscribe</emphasis> for onCourse mailing
                        list subscription: This type of integration triggers when you manually
                        attach a Mailing List tag an onCourse contact. You can create multiple
                        mailing list tag groups in onCourse that integrate with multiple MailChimp
                        lists.</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">mailchimp unsubscribe</emphasis> onCourse mailing
                        list unsubscription: This type of integration triggers when you manually
                        remove a mailing list tag from a contact. This script should be enabled the
                        script 'mailchimp subscribe'.</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">mailchimp subscribe on enrolment</emphasis>: This
                        type of integration triggers when a contact enrols via onCourse or the web.
                        You can only have one of these types of integrations to subscribe all
                        enrolling students to a single MailChimp list. Your onCourse integration
                        must be named "Enrolment" for this to work.</para>
                </listitem>
            </orderedlist>
            <section>
                <title>Creating an onCourse mailing list integration</title>
                <para>The name of your onCourse mailing list tag and MailChimp integration must be
                    the same for this to work. This integration will only add new subscribers to
                    your mailing list to MailChimp, once enabled. </para>
                <orderedlist>
                    <listitem>
                        <para>Log into MailChimp and obtain an API key for your account at <link
                                xlink:href="http://kb.mailchimp.com/accounts/management/about-api-keys"
                                >http://kb.mailchimp.com/accounts/management/about-api-keys</link>.
                            Go to Account > Extras > API keys > Create a key</para>
                    </listitem>
                    <listitem>
                        <para>In MailChimp, find your the List Id at <link
                                xlink:href="http://kb.mailchimp.com/lists/managing-subscribers/find-your-list-id"
                                >http://kb.mailchimp.com/lists/managing-subscribers/find-your-list-id</link>
                            Go to the Lists page > Settings, and scroll to find the unique List ID
                            field</para>
                    </listitem>
                    <listitem>
                        <para>In onCourse, go to File > Preferences > Tags. Find the Tag Group named
                            'Mailing Lists', and double-click to open the Tag's window.</para>
                    </listitem>
                    <listitem>
                        <para>To create a new mailing list, click the green plus in the bottom left
                            hand corner. Name your tag, then click 'Save'</para>
                    </listitem>
                    <listitem>
                        <para>To add the MailChimp integration, go to File > Preferences > General
                            and click on the 'Add' button next to the heading integrations.</para>
                    </listitem>
                    <listitem>
                        <para>Click the 'Add' button below the MailChimp icon. <emphasis
                                role="underline">The name of the integration must be the same as the
                                name of the onCourse mailing list</emphasis>. Insert your API key
                            and List and Id from MailChimp, then save and close this window.</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/mailchimp_prefs.png" format="png"/>
                            </imageobject>
                            <caption>
                                <para>MailChimp integration for a Mailing List integration</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>Once the integration has been defined you will need to enable the
                            MailChimp scripts to automate the process. These scripts can be found by
                            going File -> Preferences -> Scripts </para>
                    </listitem>
                    <listitem>
                        <para>Double click on the script called 'mailchimp subscribe', click on the
                            checkbox 'Enabled' and save the script. </para>
                    </listitem>
                    <listitem>
                        <para>You should also enable the 'mailchimp unsubscribe', click on the
                            checkbox 'Enabled' and save the script. Please note that if contacts
                            unsubscribe to the MailChimp list directly, they will not be
                            unsubscribed in the onCourse mailing list (they can unsubscribe to
                            onCourse mailing lists via the portal, which does update MailChimp), but
                            either way, they will not receive further emails from you via
                            MailChimp.</para>
                    </listitem>
                    <listitem>
                        <para>To test this script is working as required, you can manually subscribe
                            some contacts to your onCourse mailing list and check that they have
                            been added to the correct MailChimp list. To manually subscribe some
                            contacts, open the contact window, highlight some records and right
                            click on the mailing list name in the left hand part of the window.
                            Select the option 'add this tag to xx highlighted records'. You can also
                            tag an individual contact by opening their record and adding the tag
                            manually.</para>
                    </listitem>
                    <listitem>
                        <para>If you wish to add additional mailing list integrations, you can
                            repeat steps 1 to 6 as needed, adding multiple mailing list integrations
                            to onCourse. Once the scripts are enabled, you do not need to repeat
                            steps 7 to 9 again.</para>
                    </listitem>
                </orderedlist>
                <mediaobject>
                    <imageobject>
                        <imagedata scalefit="1" width="70%" contentdepth="70%"
                            fileref="images/mailchimp_script.png" format="png"/>
                    </imageobject>
                    <caption>
                        <para>MailChimp mailing list subscribe script</para>
                    </caption>
                </mediaobject>
                <section>
                    <title>Creating an 'on enrolment' integration</title>
                    <para>This type of integration with MailChimp automatically subscribes on
                        enrolment all contacts who have the permission 'accept email marketing
                        material' on their contact record. You can only have on integration of this
                        type in onCourse.</para>
                    <orderedlist>
                        <listitem>
                            <para>Log into MailChimp and obtain an API key for your account at <link
                                    xlink:href="http://kb.mailchimp.com/accounts/management/about-api-keys"
                                    >http://kb.mailchimp.com/accounts/management/about-api-keys</link>.
                                Go to Account > Extras > API keys > Create a key</para>
                        </listitem>
                        <listitem>
                            <para>In MailChimp, find your the List Id at <link
                                    xlink:href="http://kb.mailchimp.com/lists/managing-subscribers/find-your-list-id"
                                    >http://kb.mailchimp.com/lists/managing-subscribers/find-your-list-id</link>
                                Go to the Lists page > Settings, and scroll to find the unique List
                                ID field you want to subscribe your enrolling students to.</para>
                        </listitem>
                        <listitem>
                            <para>To add the MailChimp integration, go to File > Preferences >
                                General and click on the 'Add' button next to the heading
                                integrations.</para>
                        </listitem>
                        <listitem>
                            <para>Click the 'Add' button below the MailChimp icon. The name of the
                                integration must be 'Enrolment'. Insert your API key and List and Id
                                from MailChimp, then save and close this window.</para>
                        </listitem>
                        <listitem>
                            <para>Once the integration has been defined you will need to enable the
                                MailChimp script to automate the process. This scripts can be found
                                by going File -> Preferences -> Scripts </para>
                        </listitem>
                        <listitem>
                            <para>Double click on the script called 'mailchimp subscribe on
                                enrolment', click on the checkbox 'Enabled' and save the script. </para>
                            <para>Note that there is no corresponding unsubscribe script for this
                                integration - students can unsubscribe from this list directly via
                                MailChimp after receiving an email from you.</para>
                        </listitem>
                    </orderedlist>
                </section>
            </section>
        </section>
        <section xml:id="externalintegrations-surveyMonkey">
            <title>SurveyMonkey</title>
            <para>SurveyMonkey allows you to create and publish online surveys in minutes, and view
                the results graphically in real time. SurveyMonkey provides free online
                questionnaire and survey software.</para>
            <para>To add a SurveyMonkey integration you will need to click on the 'Add' button below
                the SurveyMonkey icon. You will then see a number of fields that are needed to
                enable the integration. The 'Name' field is what ever you want to call this
                integration.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="80%" contentdepth="80%"
                        fileref="images/surveymonkey_prefs.png" format="png"/>
                </imageobject>
                <caption>
                    <para>SurveyMonkey integration preferences</para>
                </caption>
            </mediaobject>
            <para>Once these preferences have been defined you will need to enable at least one of
                the SurveyMonkey scripts to automate the process. These scripts can be found by
                going File -> Preferences -> Scripts, doubling clicking on either 'SurveyMonkey send
                invite on enrolment', 'SurveyMonkey send invite on enrolment completion', or 'VET
                Course completion survey' clicking on the checkbox 'Enabled' and saving the
                script.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="70%" contentdepth="70%"
                        fileref="images/surveymonkey_script.png" format="png"/>
                </imageobject>
                <caption>
                    <para>SurveyMonkey scripts</para>
                </caption>
            </mediaobject>
            <section>
                <title>Access Tokens and Creating a developer account</title>
                <para>Survey Monkey introduced access tokens as a means of integration in January
                    2017. All integrations created after that date will need to use access tokens.
                    API Keys will not be used after this time. Existing integrations using an API
                    key will continue to use the API key. To create an access token, you set up a
                    developer account in SurveyMonkey and add onCourse as an App. </para>
                <orderedlist>
                    <listitem>
                        <para>Go to SurveyMonkey.com and login using your regular login. If you do
                            not have a login for SurveyMonkey you will need to create one.</para>
                    </listitem>
                    <listitem>
                        <para>Once logged in, got to the URL https://developer.surveymonkey.com.
                            This will bring you to the developers area to set up your
                            integration.</para>
                    </listitem>
                    <listitem>
                        <para>In the Developers area, go to My Apps. If you already have an App,
                            make sure it's not disabled or expired. If you don't already have an
                            app, or if yours is currently expired/disabled, click on 'Add a New
                            App'. <mediaobject>
                                <imageobject>
                                    <imagedata scalefit="1" width="80%" contentdepth="80%"
                                        fileref="images/surveymonkeyAddApp.png" format="png"/>
                                </imageobject>
                                <caption>
                                    <para>SurveyMonkey Developer site Add New App Feature</para>
                                </caption>
                            </mediaobject>
                        </para>
                    </listitem>
                    <listitem>
                        <para>This will open new window asking you to add an App. You can choose the
                            name of App i.e. 'onCourse'</para>
                    </listitem>
                    <listitem>
                        <para>In the App record, go to Settings, scroll down to the section called
                            Scopes and activate the following three Scopes: <itemizedlist>
                                <listitem>
                                    <para>Create/Modify Collectors</para>
                                </listitem>
                                <listitem>
                                    <para>View Collectors</para>
                                </listitem>
                                <listitem>
                                    <para>View Surveys</para>
                                </listitem>
                            </itemizedlist> Without these Scopes being activated, the integration
                            will fail to work. </para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="80%" contentdepth="80%"
                                    fileref="images/surveymonkeyScopes.png" format="png"/>
                            </imageobject>
                            <caption>
                                <para>Scopes in SurveyMonkey</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>Once you've activated the required Scopes, scroll up to the
                            Credentials section and locate the 'Access Token' field. The Access
                            token is the large string of numbers and letters in the field. Copy all
                            the text in this field and paste it into the 'OAuth token' field within
                            the Integration you're setting up in onCourse. (File > Preferences >
                            General... > Integrations)</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="80%" contentdepth="80%"
                                    fileref="images/surveymonkeyCredientials.png" format="png"/>
                            </imageobject>
                            <caption>
                                <para>SurveyMonkey Access Token Location</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                </orderedlist>
                <para>The Survey Name you need to enter in onCourse is the name listed in the
                    'Title' field on Survey Monkey, in the example below it's simply called 'Test'.
                    This can be found by logging into your account in https://www.surveymonkey.com
                    then clicking on the top menu option 'My Surveys'</para>
                <mediaobject>
                    <imageobject>
                        <imagedata scalefit="1" width="80%" contentdepth="80%"
                            fileref="images/SurveyMonkey_name.png" format="png"/>
                    </imageobject>
                    <caption>
                        <para>All your surveys inSurveyMonkey will be listed in 'My Surveys'</para>
                    </caption>
                </mediaobject>
                <para>Survey Monkey uses the term 'Collectors' to describe ways you can send out
                    your survey and collect responses. <link
                        xlink:href="https://help.surveymonkey.com/articles/en_US/kb/How-to-collect-responses"
                        > You can read more about Collectors here</link>. </para>
                <para>Set up your collector and name it 'onCourse', as this is the default collector
                    name the app looks for. If there is no Collector by this name, then the first
                    Collector in the list is selected. We highly recommend naming the Collector
                    'onCourse'.</para>
                <para>If you haven't used SurveyMonkey before you will need to verify the collectors
                    email address. This is done by clicking on the name of the Survey followed by on
                    the tab 'Collect Responses' and then on the Survey name under the heading
                    'NICKNAME' and continuing until this email gets sent.</para>
                <mediaobject>
                    <imageobject>
                        <imagedata scalefit="1" width="80%" contentdepth="80%"
                            fileref="images/survey_collector.png" format="png"/>
                    </imageobject>
                    <caption>A view of some Collectors, one has yet to be configured</caption>
                </mediaobject>
                <para>The 'Sender email address' that survey responses are sent to is the same one
                    that you should have stored in the field 'Email from address' in the Messaging
                    tab of the onCourse preferences window.</para>
                <mediaobject>
                    <imageobject>
                        <imagedata scalefit="1" width="70%" contentdepth="70%"
                            fileref="images/Preferences_messaging.png" format="png"/>
                    </imageobject>
                    <caption>
                        <para>Messaging tab of the Preferences window</para>
                    </caption>
                </mediaobject>
            </section>
        </section>
        <section xml:id="externalintegrations-surveyGizmo">
            <title>SurveyGizmo</title>
            <para>SurveyGizmo is a powerful survey tool designed to make even the most advanced
                survey projects fun, easy and affordable.</para>
            <para>To add a SurveyGizmo integration you will need to click on the 'Add' button below
                the SurveyGizmo icon. You will then see a number of fields that are needed to enable
                the integration.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="70%" contentdepth="70%"
                        fileref="images/surveygizmo_prefs.png" format="png"/>
                </imageobject>
                <caption>
                    <para>SurveyGizmo integration preferences</para>
                </caption>
            </mediaobject>
            <para>Once these preferences have been defined you will need to enable at least one of
                the SurveyGizmo scripts to automatic the process. These scripts can be found by
                going File -> Preferences -> Scripts, doubling clicking on either 'SurveyGizmo send
                invite on enrolment' or 'SurveyGizmo send invite on enrolment completion', clicking
                on the checkbox 'Enabled' and saving the script.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="70%" contentdepth="70%"
                        fileref="images/surveygizmo_script.png" format="png"/>
                </imageobject>
                <caption>
                    <para>SurveyGizmo scripts</para>
                </caption>
            </mediaobject>
            <section>
                <title>Where to find the preferences in SurveyGizmo</title>
                <para>Below is the information that is needed to enable the integration that can be
                    found in SurveyGizmo.</para>
                <orderedlist>
                    <listitem>
                        <para>The User and Password is the same one you use to log into your account
                            at SurveyGizmo</para>
                    </listitem>
                    <listitem>
                        <para>The Survey ID is taken from survey address, so in the example below
                            the Survey ID is 2290616. Please visit <link
                                xlink:href="http://help.surveygizmo.com/help/article/link/how-to-find-ids"
                                >here</link> for more information.</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/SurveyGizmo_Survey_ID.png" format="png"/>
                            </imageobject>
                            <caption>
                                <para>Where to find the SurveyGizmo Survey ID</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                </orderedlist>
            </section>
        </section>
        <section xml:id="externalintegrations-cloudAccess">
            <title>Cloud Assess</title>
            <para>Cloud Assess is an online service for managing the assessment process. It can be
                used for VET and non-VET enrolments, and can be used by tutors to help manage
                classroom based assessments as well as online assessments.</para>
            <para>When you create an account with Cloud Assess ask for the different user names and
                keys shown in the image. Then enable the script "cloudassess course enrolment
                create" in order to automatically push enrolments in onCourse into Cloud Assess.
                This script assumes that you'll create a course in Cloud Assess with the same course
                code as the course in onCourse. If there is no matching course in Cloud Assess then
                the script will do nothing. Of course you can modify the script to suit your own
                specific needs. Remember that the name of the integration here must match the name
                given within the script.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="70%" contentdepth="70%"
                        fileref="images/cloudaccess_prefs.png" format="png"/>
                </imageobject>
                <caption>
                    <para>Cloud Access integration preferences</para>
                </caption>
            </mediaobject>
            <para>Once these preferences have been defined you will need to enable the Cloud Access
                script to automate the process. This script can be found by going File ->
                Preferences -> Scripts, double clicking on 'cloudassess course enrolment create'
                then click on the 'Enabled' check box and save.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="70%" contentdepth="70%"
                        fileref="images/cloudaccess_script.png" format="png"/>
                </imageobject>
                <caption>
                    <para>Cloud Access script</para>
                </caption>
            </mediaobject>
        </section>
        <section xml:id="externalintegrations-canvas">
            <title>Canvas</title>
            <para>Canvas is an open-source learning management system for delivering training to
                students. This integration allows you to automatically make enrolments, classes and
                students using information you've already entered into onCourse. There is quite a
                bit of setup work for this integration, so ensure you are following the instructions
                precisely.</para>
            <para>It's recommended that before you begin this integration, you get in touch with us
                via Support first.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="100%" contentdepth="100%"
                        fileref="images/canvas_integration.png" format="png"/>
                </imageobject>
                <caption>
                    <para>Canvas Integration window</para>
                </caption>
            </mediaobject>
            <para>To use the onCourse integration with Canvas, you will first need to have set up a
                developer key in Canvas itself. You can find instructions on how to do this here -
                    <link
                    xlink:href="https://canvas.instructure.com/doc/api/file.developer_keys.html"
                />.</para>
            <para>You will also need to have the relevant courses and classes set up in Canvas.
                Canvas uses slightly different terminology here; courses are still 'courses', but
                classes are known as 'sections'. You'll need to ensure that every course and class
                you want captured by the integration is duplicated in both Canvas and onCourse.
                However if you cannot set up every class, in the Canvas script there is a value
                that, when set to true, can create new sections (classes) if one does not exist for
                the equivalent course in onCourse.</para>
            <para>When setting up a course in Canvas, it must use the same course code as the
                equivalent class in onCourse. Similarly with classes, all sections in Canvas must
                use the same code as the equivalent class in onCourse. E.G. if you set up a course
                with the code CWC101, and it has one class (that you don't edit the code of), then
                the course code would be CWC101 and the section/class code would be CWC101-1.</para>
            <para>Once every course and class is created in both systems, create a tag in onCourse.
                The tag must be set to Courses, and it must be called 'Canvas'. You must set this
                tag on each course that's to be included in the integration.</para>
            <para>As soon as you've got your developer key, you can continue with the integration in
                onCourse:</para>
            <para>
                <orderedlist>
                    <listitem>
                        <para>in onCourse, go to File > Preferences > General</para>
                    </listitem>
                    <listitem>
                        <para>Click the green + button next to the Integrations header in the
                            left-hand column of the window that opens</para>
                    </listitem>
                    <listitem>
                        <para>Find the Canvas integrations and select 'Add'</para>
                    </listitem>
                    <listitem>
                        <para>Enter the URL of your Canvas instance. This will look like following -
                            https://my_canvas_instance.instructure.edu.au/ - where
                            'my_canvas_instance' would be personalised with the name you gave it
                            during initial set up. You also need to enter your client id, and the
                            client secret from your developer key. </para>
                        <para>The account ID is the id number that corresponds with the account you
                            wish to enrol students into. You can find this by logging into Canvas,
                            then navigating to the left-hand menu bar. Select Admin > then select
                            your account. This will open an accounts page. The account ID will be
                            listed in the site's URL e.g. <link
                                xlink:href="https://my_canvas_instance.instructure.edu.au/accounts/36"
                            /></para>
                    </listitem>
                    <listitem>
                        <para>Once you've completed filling in the expected fields in onCourse, a
                            button labelled 'Configure' will appear. Click this and a pop-up window
                            will appear, asking you to log in to Canvas and authorise onCourse to
                            integrate with your account.</para>
                    </listitem>
                </orderedlist>
                <mediaobject>
                    <imageobject>
                        <imagedata scalefit="1" width="100%" contentdepth="100%"
                            fileref="images/canvas_login.png" format="png"/>
                    </imageobject>
                    <caption>
                        <para>Canvas login window. This window can appear differently depending on
                            the user</para>
                    </caption>
                </mediaobject>
            </para>
            <para>Lastly, you'll need to turn on the integration script. You can do this by going to
                File > Preferences > Scripts, and enabling the 'Canvas Enrol' script. Make sure you
                hit the Save button before closing the window.</para>
        </section>
    </section>
</chapter>
