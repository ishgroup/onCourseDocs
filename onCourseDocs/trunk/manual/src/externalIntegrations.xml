<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="externalintegrations">
    <title>External Integrations</title>
    <section xml:id="externalintegrations-integrationsPrefs">
        <title>Integration Preferences</title>
        <para>onCourse allows you to create integration points with a number of popular commercial
            tools. These integrations allow you to create your own links to external services and
            products you have purchased, and define with a corresponding script how onCourse
            utilises these services.</para>
        <para>You can find all the current built in integrations by go File -> Preferences ->
            General. You would then click on the 'Add' button next to the heading 'INTEGRATIONS' to
            see all the integrations, as shown below.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/integration_prefs.png" format="png" />
            </imageobject>
            <caption>
                <para>Integration preferences window</para>
            </caption>
        </mediaobject>
        <section xml:id="externalintegrations-moodle">
        <title>Moodle</title>
            <para>Moodle is a free, open-source PHP web application for producing modular
                internet-based courses that support a modern social constructionist pedagogy.</para>
            <para>To add a Moodle integration you will need to click on the 'Add' button below the
                Moodle icon. You will then see a number of fields that are needed to enable the
                integration.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/moodle_prefs.png" format="png" />
            </imageobject>
            <caption>
                <para>Moodle integration preferences</para>
            </caption>
        </mediaobject>
            <para>Once these preferences have been defined you will need to enable the 'moodle
                enrol' script to automatic the process. The Moodle script can be found by going File
                -> Preferences -> Scripts, doubling clicking on 'moodle enrol', clicking on the
                checkbox 'Enabled' and saving the script.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="100%" contentdepth="100%"
                        fileref="images/moodle_script.png" format="png" />
                </imageobject>
                <caption>
                    <para>Moodle enrol script</para>
                </caption>
            </mediaobject>
            <section>
                <title>Where to find the preferences in Moodle</title>
                <para>Below are the steps that are needed to be done to enable the Moodle
                    integration.</para>
                <orderedlist>
                    <listitem>
                        <para>The Base URL is the site url (e.g. http://localhost:8888/moodle29/)</para>
                    </listitem>
                        <listitem>
                        <para>To create a user go to Site administration -> Users -> Accounts -> Add
                            a new user</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_1._Create_user.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>Creating a user</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>To assign user to a role go to Site administration -> Users -> Permissions
                            -> Assign system roles</para>
                    </listitem>
                    <listitem>
                        <para>To add a service go to Site administration -> Plugins -> Web services
                            -> External services. When you are on thei page click on 'Add' and fill
                            in the Service Name and Short Name, then click on 'Add service'</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_3.1_External_Services_screen.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>External services screen</para>
                            </caption>
                        </mediaobject>
                        <para>When you are on this page click on 'Add' and fill in the Service Name
                            and Short Name, then click on 'Add service'</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_3.2_Create_Service.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>Adding the service</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>Once the Service is created click on 'Add functions'</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_4.1_Functions_screen.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>Functions page</para>
                            </caption>
                        </mediaobject>
                        <para>Add following functions: core_user_create_users, core_user_get_users, core_course_get_courses, enrol_manual_enrol_users</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_4.2_Add_Functions.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>Adding the functions to the service</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>The next step is to generate the token, you can do this by going to
                            Site administration -> Plugins -> Web services -> Manage tokens then
                            click on 'Add'.</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_5.1_Token_screen.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>Manage tokens page</para>
                            </caption>
                        </mediaobject>
                        <para>Then select the created user and service, and if needed Enable and Set
                            'Valid Until' date</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/Moodle_5.2_Create_token.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>Create token page</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>The last step is to create a course, you can do this by going to Site 
                            administration -> Courses -> Manage courses and categories, then Create 
                            new course. The ID should be the same as course code in onCourse.</para>
                    </listitem>
                </orderedlist>
            </section>
    </section>
        <section xml:id="externalintegrations-mailChimp">
        <title>MailChimp</title>
            <para>MailChimp is an online email marketing solution to manage contacts, send emails
                and track results.</para>
        <para>To add a MailChimp integration you will need to click on the 'Add' button below the
                MailChimp icon. You will then see a number of fields that are needed to enable the
                integration.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/mailchimp_prefs.png" format="png" />
            </imageobject>
            <caption>
                <para>MailChimp integration preferences</para>
            </caption>
        </mediaobject>
            <para>Once these preferences have been defined you will need to enable at least one of
                the MailChimp scripts to automatic the process. These scripts can be found by going
                File -> Preferences -> Scripts, doubling clicking on either 'mailchimp subscribe',
                'mailchimp subscribe on enrolment' or 'mailchimp unsubscribe', clicking on the
                checkbox 'Enabled' and saving the script.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="100%" contentdepth="100%"
                        fileref="images/mailchimp_script.png" format="png" />
                </imageobject>
                <caption>
                    <para>MailChimp scripts</para>
                </caption>
            </mediaobject>
            <section>
                <title>Where to find the preferences in MailChimp</title>
                <para>You can find the information needed to enable the MailChimp integration by
                    following the instructions below.</para>
                <orderedlist>
                    <listitem>
                        <para>To find the API key go to
                            http://kb.mailchimp.com/accounts/management/about-api-keys the click on
                            Account -> Extras -> API keys -> Create a key</para>
                    </listitem>
                    <listitem>
                        <para>To find the List Id go to
                            http://kb.mailchimp.com/lists/managing-subscribers/find-your-list-id the
                            go to the Lists page -> Settings, scroll to find the unique List ID
                            field</para>
                    </listitem>
                </orderedlist>
            </section>
    </section>
        <section xml:id="externalintegrations-surveyMonkey">
    <title>SurveyMonkey</title>
            <para>SurveyMonkey allows you to create and publish online surveys in minutes, and view
                the results graphically in real time. SurveyMonkey provides free online
                questionnaire and survey software.</para>
    <para>To add a SurveyMonkey integration you will need to click on the 'Add' button below the
                SurveyMonkey icon. You will then see a number of fields that are needed to enable
                the integration.</para>
    <mediaobject>
        <imageobject>
            <imagedata scalefit="1" width="100%" contentdepth="100%"
                fileref="images/surveymonkey_prefs.png" format="png" />
        </imageobject>
        <caption>
            <para>SurveyMonkey integration preferences</para>
        </caption>
    </mediaobject>
            <para>Once these preferences have been defined you will need to enable at least one of
                the SurveyMonkey scripts to automatic the process. These scripts can be found by
                going File -> Preferences -> Scripts, doubling clicking on either 'SurveyMonkey send
                invite on enrolment' or 'SurveyMonkey send invite on enrolment completion', clicking
                on the checkbox 'Enabled' and saving the script.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="100%" contentdepth="100%"
                        fileref="images/surveymonkey_script.png" format="png" />
                </imageobject>
                <caption>
                    <para>SurveyMonkey scripts</para>
                </caption>
            </mediaobject>
            <section>
                <title>Where to find the preferences in SurveyMonkey</title>
                <para>Below is the information that is needed to enable the SurveyGizmo integration
                    that can be found in SurveyMonkey.</para>
                <orderedlist>
                    <listitem>
                        <para>To find the API key you must have account at
                            https://developer.surveymonkey.com. From there you go to My Account and
                            the API key and Secret are found, as shown below.</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/SurveyMonkey_1.1_APIkey.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>Where to find the SurveyMonkey API key</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>To get the OAuth token go to
                            https://developer.surveymonkey.com/api_console and enter your API key,
                            Client ID (developer.surveymonkey.com account name) and secret from step
                            1. </para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/SurveyMonkey_1.2_OAuth.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>Getting your OAuth token</para>
                            </caption>
                        </mediaobject>
                        <para>You'll then be asked to login to your SurveyMonkey account (or authorize linking your OAuth token if your already logged in). After that the OAuth token will be generated in the Access Token field.</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/SurveyMonkey_1.3._Authorize_API.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>Authorizing onCourse to use your SurveyMonkey account</para>
                            </caption>
                        </mediaobject>
                    </listitem>
                    <listitem>
                        <para>The Survey name is the name of the survey in Survey Monkey.</para>
                    </listitem>
                </orderedlist>
            </section>
    </section>
        <section xml:id="externalintegrations-surveyGizmo">
    <title>SurveyGizmo</title>
            <para>SurveyGizmo is a powerful survey tool designed to make even the most advanced
                survey projects fun, easy and affordable.</para>
    <para>To add a SurveyGizmo integration you will need to click on the 'Add' button below the
                SurveyGizmo icon. You will then see a number of fields that are needed to enable the
                integration.</para>
    <mediaobject>
        <imageobject>
            <imagedata scalefit="1" width="100%" contentdepth="100%"
                fileref="images/surveygizmo_prefs.png" format="png" />
        </imageobject>
        <caption>
            <para>SurveyGizmo integration preferences</para>
        </caption>
    </mediaobject>
            <para>Once these preferences have been defined you will need to enable at
                least one of the SurveyGizmo scripts to automatic the process. These scripts can be
                found by going File -> Preferences -> Scripts, doubling clicking on either
                'SurveyGizmo send invite on enrolment' or 'SurveyGizmo send invite on enrolment
                completion', clicking on the checkbox 'Enabled' and saving the script.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="100%" contentdepth="100%"
                        fileref="images/surveygizmo_script.png" format="png" />
                </imageobject>
                <caption>
                    <para>SurveyGizmo scripts</para>
                </caption>
            </mediaobject>
            <section>
                <title>Where to find the preferences in SurveyGizmo</title>
                <para>Below is the information that is needed to enable the SurveyGizmo integration
                    that can be found in SurveyGizmo.</para>
                <orderedlist>
                    <listitem>
                        <para>The User and Password is the same one you use to log into your account
                            at SurveyGizmo</para>
                    </listitem>
                    <listitem>
                        <para>The Survey ID is taken from survey address, so in the example below
                            the Survey ID is 2290616. Please visit <link
                                xlink:href="http://help.surveygizmo.com/help/article/link/how-to-find-ids"
                                >here</link> for more information.</para>
                        <mediaobject>
                            <imageobject>
                                <imagedata scalefit="1" width="70%" contentdepth="70%"
                                    fileref="images/SurveyGizmo_Survey_ID.png" format="png" />
                            </imageobject>
                            <caption>
                                <para>Where to find the SurveyGizmo Survey ID</para>
                            </caption>
                        </mediaobject>
                        </listitem>
              </orderedlist>
            </section>
    </section>
        <section xml:id="externalintegrations-cloudAccess">
            <title>Cloud Assess</title>
            <para>Cloud Assess is an online service for managing the assessment process. It can be
                used for VET and non-VET enrolments, and can be used by tutors to help manage
                classroom based assessments as well as online assessments.</para>
            <para>When you create an account with Cloud Assess ask for the different user names and
                keys shown in the image. Then enable the script "***" in order to automatically push
                enrolments in onCourse into Cloud Assess. This script assumes that you'll create a
                course in Cloud Assess with the same course code as the course in onCourse. If there
                is no matching course in Cloud Assess then the script will do nothing. Of course you
                can modify the script to suit your own specific needs. Remember that the name of the
                integration here must mach the name given within the script.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="100%" contentdepth="100%"
                        fileref="images/cloudaccess_prefs.png" format="png" />
                </imageobject>
                <caption>
                    <para>Cloud Access integration preferences</para>
                </caption>
            </mediaobject>
            <para>Once these preferences have been defined you will need to enable the Cloud Access
                script to automate the process. This script can be found by going File ->
                Preferences -> Scripts, doubling clicking on 'cloudassess course enrolment create'
                then click on the 'Enabled' check box and save.</para>
            <mediaobject>
                <imageobject>
                    <imagedata scalefit="1" width="100%" contentdepth="100%"
                        fileref="images/cloudaccess_script.png" format="png" />
                </imageobject>
                <caption>
                    <para>Cloud Access script</para>
                </caption>
            </mediaobject>
        </section>
    </section>
</chapter>
