<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="invoice">
	<title>Invoices and Payment Plans</title>
	<section xml:id="invoice-general">
		<title>Invoices</title>
		<para>Every time you create a purchase through Quick Enrol, an invoice (or several invoices) will
			be automatically created for you. You can see the details of that invoice within Quick
			Enrol and add additional custom lines (such as a surcharge for phone payments).</para>
		<para>Invoice lines automatically created by Quick Enrol may include purchases of
			enrolments, products, vouchers or memberships. Each item purchased will create an
			invoice line. Payment against an invoice may be taken at the time of creation or at a
			later date. Be default, all invoices created will have a due date of today, but you can
			manually enter a different due date at the time or creation, or by editing the invoice
			after creation. You can also add a customer reference to an invoice, where
			required.</para>
		<para>These invoices are then visible within the Invoice lists view. Like all other lists
			you can sort, search, export and print from this view. Invoices may not be deleted and
			all of the financial information within an invoice may not be edited once created.
			Although this may seem like an inconvenience, immutable invoices are extremely important
			to ensure a robust audit trail and to guarantee the integrity of the general ledger
			transactions.</para>
		<para>If you need to modify an invoice you should instead create a credit note. A credit note is
			an invoice where the invoice lines have negative dollar values. Remember if you are
			cancelling an enrolment or a class there are easier ways to do that from the class and
			enrolment list views.</para>
		<para>A credit note is an invoice with a negative total and is shown alongside invoices in the
			same list view. The owing amounts on an invoice and a credit note are not automatically
			zeroed against each other, however you can cancel them out by using the cog wheel option
			'contra invoice'.</para>
		<section xml:id="invoice-create">
			<title>Creating an invoice</title>
			<para>While you will usually create an invoice through using Quick Enrol, it is sometimes useful
				to create an invoice without an associated product or enrolment. You can easily do
				that by opening the list of invoices and pressing the plus icon at the top
				right.</para>
			<para>Remember to associate each invoice line with the correct income account code. Once
				you save the invoice you will not be able to change this code. </para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%"
						fileref="images/Creating_a_new_invoice.png"/>
				</imageobject>
				<caption>
					<para>Creating a new invoice</para>
				</caption>
			</mediaobject>
		</section>
		<section xml:id="invoice-linking">
			<title>Link invoice lines to classes</title>
			<para>When creating invoice lines you may optionally link each line to a class. This will treat
				the income with the same general ledger pre-paid fees and income deferral plan as
				invoices created by enrolling in the class. This also adds the total of that invoice
				line to the class budget and can be very useful when invoicing a company for an
				entire classroom delivery without recording individual enrolments or need to include
				additional income such as funding in a classes budget. </para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%"
						fileref="images/invoice_lines.png"/>
				</imageobject>
				<caption>
					<para>Linking invoice lines to a class</para>
				</caption>
			</mediaobject>
		</section>
	</section>
	<section xml:id="invoice-paymentPlan">
		<title>Payment plans</title>
		<para>By default invoices have a due of the day they are created. Sometimes you will want to allow
			students to pay for training over a longer period of time. Using payment plans you can
			set the amount of the up front deposit and a series of dates for payment of the
			remainder in instalments. </para>
		<section xml:id="invoice-dueDate">
			<title>Invoice due dates</title>
			<para>An existing or new invoice can be converted to a payment plan by adding payment due dates. It is important that the total of the
				payment plan amounts equals the invoice total; you will not be able to save the invoice unless they match. </para>
		</section>
		<section xml:id="invoice-payPlanTemplate">
			<title>Class payment plan template</title>
			<para>Attaching a payment plan to an invoice by hand can be time-consuming. If you wish to offer
				a deferred payment scheme to all students in a particular class you can set up a
				payment plan templates from the class edit view you where you normally set the class
				fee. The payment plan template can include an amount on enrolment (deposit) and as
				many other amounts on dates relative to the start of the class. If you subsequently
				adjust the class timetable and change the class start date then the payment plan
				template will automatically be adjusted.</para>
			<para>When you duplicate classes the payment plan template will also be adjusted with
				the new timetable.</para>
			<para>If you have an onCourse website only the deposit amount will normally be charged
				at enrolment; however if the next payment dates have already passed those amount
				will also be charged. So, let's take an example class with a $1000 deposit and $500
				due 7 days before the start of class. A student enrolling 10 days before the class
				starts will be charged $1000 and a student enrolling 5 days before class starts will
				be charged $1500. </para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" width="100%" contentdepth="100%"
						fileref="images/Class_payment_plan.png"/>
				</imageobject>
				<caption>
					<para>Creating a payment plan in a class</para>
				</caption>
			</mediaobject>
		</section>
		<section xml:id="invoice-QE">
			<title>Quick Enrol</title>
			<para>During Quick Enrol every involvement with a different payment plan will be added to a
				separate invoice. In this way a single Quick Enrol process may generate two or more
				invoices. If several enrolments have an identical payment plan, then they will end
				up on the same invoice.</para>
			<para>By default Quick Enrol will attempt to take a payment from the student for all
				amounts already due or overdue. </para>
		</section>
		<section xml:id="invoice-script">
			<title>Automating payment plans with scripts</title>
			<para>If you have payment plan templates to create for very many classes you may wish to instead
				use a script to automate the process. A simple script might identify all classes
				with a fee over $1000 and then limit the amount due on enrolment to $1000 with the
				remainder payable at the date the class starts.</para>
			<para>More sophisticated payment plan scripts can create different plans depending on
				the duration of the class, the amount of the fee, whether the class is VET or not
				and any other criteria.</para>
		</section>
	</section>
</chapter>
