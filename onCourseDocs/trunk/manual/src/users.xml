<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    version="5.0" xml:id="users">
    <title>Users and Authenication</title>
    <section xml:id="users-Users">
        <title>Users</title>
        <para>Go to File -> Preferences and select Users Add the names, user names and passwords
            for each onCourse user. There are no limits to the number of users in onCourse.
            Users can be deactivated if they leave your organisation.</para>
        <itemizedlist>
            <listitem>
                <para>Login - What you use along with the password to login into onCourse e.g:
                    Login : John</para>
            </listitem>
            <listitem>
                <para>Password</para>
            </listitem>
            <listitem>
                <para>First Name</para>
            </listitem>
            <listitem>
                <para>Last Name</para>
            </listitem>
            <listitem>
                <para>Default administration centre - The Default administration centre refers
                    to the physical site where your staff are working. From the drop down menu
                    select that site. </para>
            </listitem>
            <listitem>
                <para>Email</para>
            </listitem>
            <listitem>
                <para>Active - selecting this allows the user to login to onCourse. If active is
                    not selected, the user will receive an "authentication failed" message at
                    the onCourse login screen.</para>
            </listitem>
            <listitem>
                <para>Admin - Checking this will allow the user to be an admin, they will have
                    many access rights and can assign roles and rights to other users.</para>
            </listitem>
            <listitem>
                <para>Last logged on - not editable, just tells you when that user last logged
                    on.</para>
            </listitem>
        </itemizedlist>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/users_screenshot.png" format="png"/>
            </imageobject>
            <caption>
                <para>The "new user" window</para>
            </caption>
        </mediaobject>
        <para>A user can change their own password by going File -> Preferences -> and click on the
            option 'Change my password'. Once they do this a window will pop up asking them to enter
            what they would like their new password to be.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/Change_password.png" format="png"/>
            </imageobject>
            <caption>
                <para>Change my password window</para>
            </caption>
        </mediaobject>
        <tip>
            <para>If your College has more than one Administration Centre, it is possible to
                switch between these centres whilst a user is logged in by selecting the
                relevant centre from the home splash screen of the onCourse client as shown in
                the following example. </para>
        </tip>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/reset_admin_site_login.png" format="png"/>
            </imageobject>
            <caption>
                <para>Switching the administration centre</para>
            </caption>
        </mediaobject>
    </section>
    <section xml:id="users-TOTP">
        <title>Two Factor Authentication</title>
        <para>Two factor authentication is an added layer of security for users accessing onCourse
            cloud instances, in particular, but also useful for locally hosted onCourse servers with
            VPN access enabled. When logging into onCourse there will be a third field called Token
            that needs to be filled in with a 6 digit code if the user has two factor authentication
            enabled. If not, then this field can be left blank. If you try to log in with the wrong
            Token, when you have this feature enabled, then you will get an error message saying
            'Authentication failed'.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/Two_factor_authentication.png" format="png"/>
            </imageobject>
            <caption>
                <para>Login window</para>
            </caption>
        </mediaobject>
        <para>For a user who is trying to enable their own two factor authentication, whilst logged
            into onCoure they would need to go File -> Preferences -> then select the option 'Enable
            two factor authentication'. Once they have done this a new window will appear providing
            instructions on what to do. Once you have followed these instructions by downloading the
            app and scanning to the barcode you would then need to enter the 6 digit code that
            appears on your screen.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/Enable_two_factor_authentication.png" format="png"/>
            </imageobject>
            <caption>
                <para>Window you see when trying to enable your own two factor authentication</para>
            </caption>
        </mediaobject>
                <para>If the users two factor authentication is already enabled and they wish to
            disbale it they would following the same route and go File -> Preferences -> and
            clicking on the option 'Disable two factor authenication'.</para>
        <para>Once they have done this a window will appearing confirming that they definitely want
            to disable this feature and explaining what happens if they do. To confirm they would
            need to click on the 'Disable' button.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/Disable_two_factor_authentication_message.png" format="png"/>
            </imageobject>
            <caption>
                <para>Message window you see when trying to disable your own two factor
                    authentication</para>
            </caption>
        </mediaobject>
        <para>An admin user does have the power to change a users password or disable a users two
            factor authentication, if they have e.g. forgotten their mobile phone. They can do this
            by going File -> Preferences -> Users -> double click on the user you want to change,
            then click on the button 'Reset authentication'.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/users_screenshot.png" format="png"/>
            </imageobject>
            <caption>
                <para>User edit view window</para>
            </caption>
        </mediaobject>
        <para>Once you click on the button 'Reset authentication' and the user has their two factor
            authentication disabled then the sheet that appears, as shown below, will only allow the
            admin user to reset their password.</para>
        <note>
            <para>Only the user can enabled their own two factor authentication.</para>
        </note>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/Two_factor_authentication_disabled.png" format="png"/>
            </imageobject>
            <caption>
                <para>Sheet that appears when you click on the 'Reset authentication' button in the
                    user edit view if the selected user has two factor authentication
                    disabled</para>
            </caption>
        </mediaobject>
        <para>If the user has their two factor authentication enabled then the sheet that appears,
            as shown below. This will allow the admin user to both reset their password and to
            disable their two factor authentication.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="100%" contentdepth="100%"
                    fileref="images/Two_factor_authentication_enabled.png" format="png"/>
            </imageobject>
            <caption>
                <para>Sheet that appears when you click on the 'Reset authentication' button in the
                    user edit view if the selected user has two factor authentication enabled</para>
            </caption>
        </mediaobject>
        <para>An admin user can see a list of all users that have this feature enabled in the users
            list view by whether the checkbox is ticketed in the Two factor authentication column,
            next to their name.</para>
        <mediaobject>
            <imageobject>
                <imagedata scalefit="1" width="80%" contentdepth="80%"
                    fileref="images/Users_list_view.png" format="png"/>
            </imageobject>
            <caption>
                <para>Users list view</para>
            </caption>
        </mediaobject>
    </section>
</chapter>
